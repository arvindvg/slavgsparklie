# Autogenerated bulkloader.yaml file.
# You must edit this file before using it. TODO: Remove this line when done.
# At a minimum address the items marked with TODO:
#  * Fill in connector and connector_options
#  * Review the property_map.
#    - Ensure the 'external_name' matches the name of your CSV column,
#      XML tag, etc.
#    - Check that __key__ property is what you want. Its value will become
#      the key name on import, and on export the value will be the Key
#      object.  If you would like automatic key generation on import and
#      omitting the key on export, you can remove the entire __key__
#      property from the property map.

# If you have module(s) with your model classes, add them here. Also
# change the kind properties to model_class.
python_preamble:
- import: base64
- import: re
- import: google.appengine.ext.bulkload.transform
- import: google.appengine.ext.bulkload.bulkloader_wizard
- import: google.appengine.ext.db
- import: google.appengine.api.datastore
- import: google.appengine.api.users

transformers:

- kind: cluster_db
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('id')
    export_transform: transform.key_id_or_name_as_string
  - property: Cluster_no
    external_name: clust_no
    import_transform: int
  - property: Range
    external_name: range
    import_transform: int
  - property: min_price
    external_name: min
    import_transform: int
  - property: max_price
    external_name: max
    import_transform: int
  - property: Sparkle
    external_name: cut_index
  - property: Transparency
    external_name: color_index
  - property: Imperfections
    external_name: clarity_index
  - property: Price
    external_name: price_index
  - property: Size
    external_name: carat_index
  - property: Sparkle_C
    external_name: cut_nom_c_MEAN
    import_transform: float
  - property: Transparency_C
    external_name: color_nom_c_MEAN
    import_transform: float
  - property: Imperfections_C
    external_name: clarity_nom_c_MEAN
    import_transform: float
  - property: Price_C
    external_name: price_c_MEAN
    import_transform: float
  - property: Size_C
    external_name: carat_c_MEAN
    import_transform: float
  - property: Sparkle_I
    external_name: cut_influence
    import_transform: float
  - property: Transparency_I
    external_name: color_influence
    import_transform: float
  - property: Imperfections_I
    external_name: clarity_influence
    import_transform: float
  - property: Price_I
    external_name: price_influence
    import_transform: float
  - property: Size_I
    external_name: carat_influence
    import_transform: float
  - property: Title
    external_name: title
  - property: Tip
    external_name: tip 
- kind: sample_inventory
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('ID')
    export_transform: transform.key_id_or_name_as_string
  - property: Sparkle
    external_name: cut_nom
    import_transform: float
  - property: Transparency
    external_name: color_nom
    import_transform: float
  - property: Imperfections
    external_name: clarity_nom
    import_transform: float
  - property: Price
    external_name: price
    import_transform: float
  - property: Size
    external_name: carat
    import_transform: float
  - property: count
    external_name: id
    import_transform: int
  - property: Merchant
    external_name: merchant_title
    import_transform: db.Text
  - property: Sparkle_real
    external_name: cut
    import_transform: db.Text
  - property: Transparency_real
    external_name: color
    import_transform: db.Text
  - property: Imperfections_real
    external_name: clarity
    import_transform: db.Text
  - property: RingName
    external_name: ring_title
    import_transform: db.Text
  - property: Ring_des
    external_name: ring_description
    import_transform: db.Text
  - property: Shape
    external_name: diamond_shape
    import_transform: db.Text
  - property: Setting
    external_name: ring_setting
    import_transform: db.Text
  - property: Metal
    external_name: ring_metal
    import_transform: db.Text
  - property: RingName_raw
    external_name: prod_name_raw
    import_transform: db.Text
  - property: Merchant_id
    external_name: mrch_id
    import_transform: db.Text
  - property: prod_url1
    external_name: prod_url1
    import_transform: db.Text
  - property: image_url1
    external_name: image_url1
    import_transform: db.Text
  - property: prod_url2
    external_name: prod_url2
    import_transform: db.Text
  - property: prod_url3
    external_name: prod_url3
    import_transform: db.Text

- kind: sample_inventory_v2
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('ID')
    export_transform: transform.key_id_or_name_as_string
  - property: Sparkle
    external_name: cut_nom
    import_transform: float
  - property: Transparency
    external_name: color_nom
    import_transform: float
  - property: Imperfections
    external_name: clarity_nom
    import_transform: float
  - property: Price
    external_name: price
    import_transform: float
  - property: Size
    external_name: carat
    import_transform: float
  - property: count
    external_name: id
    import_transform: int
  - property: Merchant
    external_name: merchant_title
    import_transform: db.Text
  - property: Sparkle_real
    external_name: cut
    import_transform: db.Text
  - property: Transparency_real
    external_name: color
    import_transform: db.Text
  - property: Imperfections_real
    external_name: clarity
    import_transform: db.Text
  - property: RingName
    external_name: ring_title
    import_transform: db.Text
  - property: Ring_des
    external_name: ring_description
    import_transform: db.Text
  - property: Shape
    external_name: diamond_shape
    import_transform: db.Text
  - property: Setting
    external_name: ring_setting
    import_transform: db.Text
  - property: Metal
    external_name: ring_metal
    import_transform: db.Text
  - property: Metal_quality
    external_name: metal_quality
    import_transform: db.Text
  - property: RingName_raw
    external_name: prod_name_raw
    import_transform: db.Text
  - property: Merchant_id
    external_name: mrch_id
    import_transform: int
  - property: prod_url1
    external_name: product_url
    import_transform: db.Text
  - property: image_url1
    external_name: image_url
    import_transform: db.Text
  - property: prod_url2
    external_name: prod_url2
    import_transform: db.Text
  - property: prod_url3
    external_name: prod_url3
    import_transform: db.Text
  - property: image_url2
    external_name: image_url2
    import_transform: db.Text

- kind: user_input_db
  connector: csv
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string

    - property: date
      external_name: date
      # Type: Date/Time Stats: 35 properties of this type in this kind.
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')

    - property: price
      external_name: price
      # Type: String Stats: 35 properties of this type in this kind.

    - property: ring
      external_name: ring
      # Type: String Stats: 35 properties of this type in this kind.

    - property: selection
      external_name: selection
      # Type: String Stats: 35 properties of this type in this kind.
- kind: email2_db
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('ID')
    export_transform: transform.key_id_or_name_as_string
  - property: email
    external_name: email
  - property: date
    external_name: date
  - property: gen_feedback
    external_name: gen_feedback
  - property: recomm_feedback
    external_name: recomm_feedback
  - property: comp_feedback
    external_name: comp_feedback
  - property: dtype_feedback
    external_name: dtype_feedback
  - property: question_feedback
    external_name: question_feedback
  - property: sex
    external_name: sex
  - property: married
    external_name: married
  - property: ring
    external_name: ring
  - property: online
    external_name: online
  - property: shop_style
    external_name: shop_style

- kind: new_inventory
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('ID')
    export_transform: transform.key_id_or_name_as_string
  - property: Sparkle
    external_name: cut_nom
    import_transform: float
  - property: Transparency
    external_name: color_nom
    import_transform: float
  - property: Imperfections
    external_name: clarity_nom
    import_transform: float
  - property: Price
    external_name: price
    import_transform: float
  - property: Size
    external_name: carat
    import_transform: float
  - property: count
    external_name: id
    import_transform: int
  - property: Merchant
    external_name: merchant_title
    import_transform: db.Text
  - property: Sparkle_real
    external_name: cut
    import_transform: db.Text
  - property: Transparency_real
    external_name: color
    import_transform: db.Text
  - property: Imperfections_real
    external_name: clarity
    import_transform: db.Text
  - property: RingName
    external_name: ring_title
    import_transform: db.Text
  - property: Ring_des
    external_name: ring_description
    import_transform: db.Text
  - property: Shape
    external_name: diamond_shape
    import_transform: db.Text
  - property: Setting
    external_name: ring_setting
    import_transform: db.Text
  - property: Metal
    external_name: ring_metal
    import_transform: db.Text
  - property: Metal_quality
    external_name: metal_quality
    import_transform: db.Text
  - property: RingName_raw
    external_name: prod_name_raw
    import_transform: db.Text
  - property: Merchant_id
    external_name: mrch_id
    import_transform: int
  - property: prod_url1
    external_name: product_url
    import_transform: db.Text
  - property: image_url1
    external_name: image_url
    import_transform: db.Text
  - property: image_url2
    external_name: image_url2
    import_transform: db.Text
  - property: image_url3
    external_name: image_url3
    import_transform: db.Text
  - property: votes
    external_name: votes
    import_transform: int
  - property: local_merchant_flag
    external_name: local_merchant_flag
    import_transform: int
  - property: priority_score
    external_name: priority_score
    import_transform: int

- kind: merchant
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('ID')
    export_transform: transform.key_id_or_name_as_string
  - property: merchant_name
    external_name: merchant_name
    import_transform: db.Text
  - property: Merchant_id
    external_name: mrch_id
    import_transform: int
  - property: merchant_email
    external_name: merchant_email
    import_transform: db.Text
  - property: merchant_contact
    external_name: merchant_contact
    import_transform: db.Text
  - property: merchant_address
    external_name: merchant_address
    import_transform: db.Text

- kind: event_db
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('ID')
    export_transform: transform.key_id_or_name_as_string
  - property: date
    external_name: date
    import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
    export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')
  - property: unique_id
    external_name: unique_id
  - property: event_type
    external_name: event_type
  - property: event_value
    external_name: event_value

- kind: voting_db
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('ID')
    export_transform: transform.key_id_or_name_as_string
  - property: date
    external_name: date
    import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
    export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')
  - property: product_id
    external_name: product_id
    import_transform: int
  - property: unique_id
    external_name: unique_id
    import_transform: db.Text
  - property: upvote_count
    external_name: upvote_count
    import_transform: int

- kind: appointment_db
  connector: csv
  property_map:
  - property: __key__
    external_name: id
    import_transform: transform.create_foreign_key('ID')
    export_transform: transform.key_id_or_name_as_string
  - property: date
    external_name: date
    import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
    export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')
  - property: first_name
    external_name: first_name
    import_transform: db.Text
  - property: last_name
    external_name: last_name
    import_transform: db.Text
  - property: phone_number
    external_name: phone_number
    import_transform: db.Text
  - property: message_body
    external_name: message_body
    import_transform: db.Text
  - property: email
    external_name: email
    import_transform: db.Text
  - property: appointment_time
    external_name: appointment_time
    import_transform: db.Text